let output_json="";document.getElementById("btn_convert").onclick=function(){var e=document.getElementById("info_file").files;if(e.length<=0)return!1;var t=new FileReader;t.onload=function(e){let t=JSON.parse(e.target.result),n=(JSON.stringify(t,null,2),Object.keys(t.stickers).length),i=document.getElementById("identifier").value,o=document.getElementById("name").value,l=document.getElementById("pub_name").value,c=document.getElementById("tray_name").value;output_json=(output_json='{"android_play_store_link":"","ios_app_store_link":"","sticker_packs":[{"identifier":"').concat(i,'","name":"',o,'","publisher":"',l,'","tray_image_file":"',c,'","image_data_version":"1","avoid_cache":false,"publisher_email":"","publisher_website":"","privacy_policy_website":"","license_agreement_website":"","animated_sticker_pack":"true","stickers":[');for(let e=0;e<n;e++)output_json=e<n-1?output_json.concat('{"image_file":"',t.stickers[e].file,'","emojis":["',t.stickers[e].emoji,'"]},'):output_json.concat('{"image_file":"',t.stickers[e].file,'","emojis":["',t.stickers[e].emoji,'"]}');output_json=output_json.concat("]}]}")},t.readAsText(e.item(0))},document.getElementById("download").onclick=function(){const e=new Blob([output_json],{type:"text/plain"});let t=document.createElement("a");t.download="contents.json",null!=window.webkitURL?t.href=window.webkitURL.createObjectURL(e):(t.href=window.URL.createObjectURL(e),t.style.display="none",document.body.appendChild(t)),t.click()};
